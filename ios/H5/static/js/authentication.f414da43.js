(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["authentication"],{"135d":function(t,e,n){},3029:function(t,e,n){},"42f4":function(t,e,n){t.exports=n.p+"static/img/success-blue.19436a3e.png"},"4c48":function(t,e,n){"use strict";var a=n("3029"),i=n.n(a);i.a},5515:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bgfff"},[n("div",[t._m(0),n("div",{staticClass:"search_warp"},[n("i",{staticClass:"icon_search"}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],staticClass:"search_input",attrs:{type:"text",placeholder:"请输入银行名称关键词"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}})])]),n("div",{staticClass:"search_content"},[n("mt-index-list",{attrs:{height:312}},[t.searchValue?t._e():n("mt-index-section",{attrs:{index:""}},[n("li",[n("p",{staticClass:"line mint-indexsection-index"},[t._v("\n            热门银行\n          ")]),n("div",{staticClass:"hot_list"},t._l(t.bankHotListArr,(function(e,a){return n("div",{key:a,staticClass:"box",attrs:{index:a}},[n("div",{staticClass:"search_item",on:{click:function(n){return t.clickCard(e)}}},[n("div",{staticClass:"text"},[t._v("\n                  "+t._s(e.name)+"\n                ")])])])})),0)])]),t._l(t.bankListArr,(function(e,a){return n("mt-index-section",{key:a,attrs:{index:a}},t._l(e,(function(e,a){return n("li",{key:a,staticClass:"search_item",on:{click:function(n){return t.clickCard(e)}}},[t._v("\n          "+t._s(e.name)+"\n        ")])})),0)}))],2)],1)])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search_title"},[n("h5",{staticClass:"size36 color333"},[t._v("\n        选择银行\n      ")])])}],r=n("76a0");n("8635"),n("f1a6");function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o={name:"SelectCard",components:(a={},c(a,r["IndexList"].name,r["IndexList"]),c(a,r["IndexSection"].name,r["IndexSection"]),a),data:function(){return{bankListArr:{},bankHotListArr:{},searchValue:"",resultsList:""}},computed:{bankList:function(){return this.$store.state.bankList}},watch:{searchValue:function(t,e){var n=String(t).toUpperCase(),a=[];this.resultsList.forEach((function(t){-1===String(t.name).indexOf(n)&&-1===String(t.first_pinyin_letter).indexOf(n)||a.push(t)})),this.bankListArr=a.reduce((function(t,e){return t[e.first_pinyin_letter[0]]||(t[e.first_pinyin_letter[0]]=[]),t[e.first_pinyin_letter[0]].push(e),t}),{}),this.bankListArr=this.objKeySort(this.bankListArr)}},created:function(){this.getBankListFun()},methods:{thisTitle:function(){document.title="选择银行卡"},getBankListFun:function(){var t=this;t.$api.card.getBankList().then((function(e){t.resultsList=e.data.data.bank_list,t.bankHotListArr=e.data.data.hot_bank_list,console.log(t.resultsList),t.bankListArr=t.resultsList.reduce((function(t,e){return console.log(t),console.log(e),t[e.first_pinyin_letter[0]]||(t[e.first_pinyin_letter[0]]=[]),t[e.first_pinyin_letter[0]].push(e),t}),{}),t.bankListArr=t.objKeySort(t.bankListArr)}))},objKeySort:function(t){console.log(t);var e=Object.keys(t).sort();console.log(e);for(var n={},a=0;a<e.length;a++)n[e[a]]=t[e[a]];return n},clickCard:function(t){this.$emit("selectCard",t)}}},l=o,u=(n("f7a6"),n("2877")),d=Object(u["a"])(l,i,s,!1,null,"44f3eda2",null);e["a"]=d.exports},6891:function(t,e,n){"use strict";var a=n("75d3"),i=n.n(a);i.a},"75d3":function(t,e,n){},9446:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("top-msg",{attrs:{"header-name":"实名认证"}}),n("div",{staticClass:"con_body"},[t._m(0),n("div",{staticClass:"btn_warp"},[n("button",{staticClass:"btn btn_submit",on:{click:t.gotoHome}},[t._v("\n        确定\n      ")])])])],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form_cells form_cells_form  mgb20"},[a("p",{staticStyle:{"margin-top":"55px","text-align":"center"}},[a("img",{staticStyle:{width:"100px"},attrs:{src:n("42f4"),alt:""}}),a("br"),t._v("\n        恭喜您！实名认证成功！\n      ")])])}],s=(n("2c92"),n("5515"),n("c506"),n("5b4d"),n("bc3a"),{name:"AuthenticationSuccess",components:{},data:function(){return{}},computed:{},watch:{},created:function(){this.thisTitle()},methods:{thisTitle:function(){document.title="个人实名认证"},gotoHome:function(t){this.$router.replace("/home")}}}),r=s,c=(n("6891"),n("2877")),o=Object(c["a"])(r,a,i,!1,null,"46180716",null);e["default"]=o.exports},ad6c:function(t,e,n){"use strict";n.r(e);var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("top-msg",{attrs:{"header-name":"个人实名认证"}}),n("div",{staticClass:"con_body"},[n("div",{staticClass:"form_cells form_cells_form bgfff mgb20"},[n("div",{staticClass:"form_cell"},[t._m(0),n("div",{staticClass:"form_cellBd"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form_input",attrs:{type:"text",placeholder:"请输入您的名字"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),n("div",{staticClass:"form_cell"},[t._m(1),n("div",{staticClass:"form_cellBd"},[n("fun-components-input",{attrs:{"num-type":"identifyNo",placeholder:"请输入您的身份证件号码"},on:{onRawValue:function(e){t.identify=e}},model:{value:t.identifyShow,callback:function(e){t.identifyShow=e},expression:"identifyShow"}})],1)])]),n("div",{staticClass:"form_cells form_cells_form bgfff"},[n("div",{staticClass:"form_cell"},[t._m(2),n("div",{staticClass:"form_cellBd"},[n("fun-components-input",{attrs:{"num-type":"cardNo",placeholder:"请输入您的储蓄卡号码"},on:{onRawValue:function(e){t.cardId=e}},model:{value:t.cardIdShow,callback:function(e){t.cardIdShow=e},expression:"cardIdShow"}})],1)]),n("div",{staticClass:"form_cell",staticStyle:{display:"none"}},[t._m(3),n("div",{staticClass:"form_cellBd",on:{click:function(e){t.bankPicker=!0}}},[t.bankSelect.name?n("span",{staticClass:"size30",staticStyle:{color:"#666666"}},[t._v(t._s(t.bankSelect.name))]):n("span",{staticClass:"size30",staticStyle:{color:"#BEBEBE"}},[t._v("请选择所属银行")])])]),n("div",{staticClass:"form_cell"},[t._m(4),n("div",{staticClass:"form_cellBd"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.cardTel,expression:"cardTel"}],staticClass:"form_input",attrs:{type:"number",maxlength:"11",placeholder:"请输入预留手机号"},domProps:{value:t.cardTel},on:{input:function(e){e.target.composing||(t.cardTel=e.target.value)}}})])])]),n("div",{staticClass:"btn_warp"},[n("button",{staticClass:"btn btn_submit",on:{click:t.confirmAuth}},[t._v("\n        确认提交\n      ")])])]),n("van-popup",{attrs:{position:"bottom"},model:{value:t.bankPicker,callback:function(e){t.bankPicker=e},expression:"bankPicker"}},[n("choose-card",{on:{selectCard:t.selectCard}})],1)],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form_cellHd"},[n("label",{staticClass:"form_label"},[t._v("姓名")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form_cellHd"},[n("label",{staticClass:"form_label"},[t._v("身份证")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form_cellHd"},[n("label",{staticClass:"form_label"},[t._v("储蓄卡号")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form_cellHd"},[n("label",{staticClass:"form_label"},[t._v("所属银行")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form_cellHd"},[n("label",{staticClass:"form_label"},[t._v("预留手机号")])])}],r=(n("e7e5"),n("d399")),c=(n("5f5f"),n("f253")),o=n("2c92"),l=n("5515"),u=n("c506"),d=(n("5b4d"),n("bc3a")),f=n.n(d),m=n("5f87");function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p={name:"Authentication",components:(a={topMsg:o["a"]},h(a,c["a"].name,c["a"]),h(a,"chooseCard",l["a"]),h(a,"FunComponentsInput",u["a"]),a),data:function(){return{auth_url:"",auth_token:"",tel:"",code:"",isGetCode:!1,num:60,timer:"",name:"",identify:"",identifyShow:"",isAutoUpload:"",cardId:"",cardIdShow:"",cardTel:"",bankSelect:{},bankPicker:!1,bankListArr:[],items:{}}},computed:{token:function(){return this.$store.state.token},userInfo:function(){return this.$store.state.userInfo},bankList:function(){return this.$store.state.bankList}},watch:{},created:function(){var t=this;this.auth_url=this.STATIC_INFO.cfcaAuthUrl,this.auth_token=Object(m["a"])(),console.log(this.auth_token),this.thisTitle(),this.getBankListFun(),this.$store.dispatch("GetBankList").then((function(){t.judgeUserAuth()})),this.$store.dispatch("GetUserInfo").then((function(){}))},methods:{thisTitle:function(){document.title="个人实名认证"},getCodeFun:function(){var t=this,e=function(e){return t.$dialog({title:e,showCancelButton:!1,confirmButtonText:"确定",cancelButtonText:"确定",className:"dialog",closeOnClickOverlay:!0})};t.tel?t.$util.isPhone(t.tel)?t.isGetCode||(t.isGetCode=!0,t.timer=setInterval((function(){0!==t.num?t.num--:(t.isGetCode=!1,t.num=60,clearInterval(t.timer))}),1e3)):e("请输入正确的手机号码"):e("请输入您的手机号码")},submitAuthenticationBw:function(){var t=this,e=this.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"请稍候..."}),n={name:t.name,identificationNumber:t.identify,accountNumber:t.cardId,phoneNumber:t.cardTel};t.$api.center.authenticationBw(n).then((function(n){e.clear(),t.$dialog({title:"认证成功",showCancelButton:!1,confirmButtonText:"确定",className:"dialog",closeOnClickOverlay:!1}).then((function(){t.$router.replace("/center")}))}))},confirmAuth:function(){var t=this,e=function(e){return t.$dialog({title:e,showCancelButton:!1,confirmButtonText:"确定",className:"dialog",closeOnClickOverlay:!0})};if(t.name)if(t.identify)if(t.cardId)if(t.bankSelect)if(t.cardTel){if(this.$util.isPhone(t.cardTel))return void t.submitAuthenticationBw();e("请输入正确的手机号")}else e("请输入您的预留手机号码");else e("请选择储蓄卡所属银行");else e("请输入您的储蓄卡号");else e("请输入您的身份证");else e("请输入您的姓名")},showFace:function(t){},submitAuthentication:function(){var t=this,e=this.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"请稍候..."}),n={agentId:"10000",bankCard:t.cardId,idCard:t.identify,name:t.name,mobile:t.cardTel};f.a.post("http://app.zhr168.com/api/auth/bank4Needs/hkj/auth",n).then((function(n){e.clear();var a=n.data.data;console.log("黑科四要素......"),console.log(a),"20"==a.verification?t.$api.center.saveYskAuth({id_card_no:t.identify,id_card_name:t.name,is_auth:1,auth_msg:""}).then((function(){r["a"].success("认证完成"),t.$router.replace("/center")})):Object(r["a"])(a.message)})).catch((function(t){console.log(t),Object(r["a"])("服务异常")}))},judgeUserAuth:function(){var t=this;t.getAuthenticationFun()},getAuthenticationFun:function(){var t=this;t.$api.center.getAuthentication().then((function(e){t.name=e.data.data.id_card_name,t.identify=e.data.data.id_card_no,t.identifyShow=t.identify.replace(/(\d{6})(?=\d)/,"$1 ").replace(/(\d{8})(?=\d)/,"$1 "),t.cardId=e.data.data.bank_card_no,t.cardIdShow=t.cardId.replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1 "),t.cardTel=e.data.data.bank_card_phone_num,t.$set(t.bankSelect,"bank_no",e.data.data.bank_code),t.$set(t.bankSelect,"name",t.bankList[t.bankSelect.bank_no])}))},closeStatusPicker:function(t){console.log(t),this.bankSelect=t,this.bankPicker=!1},getBankListFun:function(){var t=this;t.$store.dispatch("GetBankList").then((function(){for(var e in t.bankList)t.bankListArr.push({bankNo:e,text:t.bankList[e]})}))},selectCard:function(t){console.log(t),this.bankSelect=t,this.bankPicker=!1}}},_=p,v=(n("4c48"),n("2877")),b=Object(v["a"])(_,i,s,!1,null,"5e7573ca",null);e["default"]=b.exports},c506:function(t,e,n){"use strict";function a(t,e){if("cardNo"===e){var n=t;return n=n.replace(/\s/g,"").replace(/\D/g,"").replace(/(\d{4})(?=\d)/g,"$1 "),n}if("identifyNo"===e){var a=t;return a=a.replace(/\s/g,"").replace(/[^0-9X]/g,"").replace(/(\d{6})(?=\d)/,"$1 ").replace(/(\d{8})(?=\d)/,"$1 "),a}}e["a"]={name:"card-no-input",data:function(){return{previousValue:null}},props:{value:{type:String},numType:{type:String}},render:function(t){var e=this,n=a(e.value,e.numType);return e.previousValue=n,t("input",{attrs:{placeholder:e.$attrs.placeholder,disabled:e.$attrs.disabled},class:{form_input:!0,bold:e.value},domProps:{value:n},on:{keyup:function(t){var n=t.target;if(n.selectionStart<e.previousValue.length)e.previousValue=t.target.value;else{e.previousValue=t.target.value;var i=a(t.target.value,e.numType),s=i.replace(/\s/g,"");e.$emit("input",i),e.$emit("onRawValue",s),t.target.value=a(t.target.value,e.numType)}},blur:function(t){var n=a(t.target.value,e.numType),i=n.replace(/\s/g,"");e.$emit("input",n),e.$emit("onRawValue",i),t.target.value=a(t.target.value,e.numType)}}})}}},f7a6:function(t,e,n){"use strict";var a=n("135d"),i=n.n(a);i.a}}]);
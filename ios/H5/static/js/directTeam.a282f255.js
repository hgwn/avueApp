(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["directTeam"],{"2c92":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.isWechat?t._e():e("div",{staticClass:"header"},[e("div",{staticClass:"header_body"},[e("span",{staticClass:"goBack",on:{click:t.goBack}},[e("van-icon",{attrs:{name:"arrow-left"}})],1),e("div",{staticClass:"flex-vertical-centering"},[e("p",{staticClass:"textEllipsis",on:{click:t.showLog}},[t._v("\n        "+t._s(t.headerName)+"\n      ")])]),t.shareShow?e("span",{staticClass:"shareSheet",on:{click:t.shareSheet}},[t._v("分享")]):t._e()])])},n=[],i={name:"TopMsg",props:{headerName:{type:String,default:""},required:{type:Boolean,default:!0},shareShow:{type:Boolean,default:!1}},data:function(){return{clickNum:0}},computed:{isWechat:function(){return this.$store.state.isWechat}},watch:{$route:function(){this.clickNum=0}},created:function(){},methods:{goBack:function(){var t=this;t.$router.go(-1)},shareSheet:function(){this.$emit("shareSheet")},showLog:function(){if(this.clickNum++,5===this.clickNum){this.clickNum=0;var t=document.getElementsByClassName("vc-switch")[0],s=window.getComputedStyle(t,null).getPropertyValue("display");"block"===s?VCONSOLE.hide():VCONSOLE.show()}}}},l=i,r=(e("c411"),e("2877")),c=Object(r["a"])(l,a,n,!1,null,"5db562cc",null);s["a"]=c.exports},"5b14":function(t,s,e){"use strict";var a=e("d4ba"),n=e.n(a);n.a},b24c:function(t,s,e){},c411:function(t,s,e){"use strict";var a=e("b24c"),n=e.n(a);n.a},d4ba:function(t,s,e){},dd0a:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"direct-team-page"},[e("top-msg",{attrs:{"header-name":t.isAllDirect?"我的直推用户":t.$route.query.rank_name}}),t.isAllDirect?t._e():e("div",{staticClass:"clear sub-title"},[e("span",{staticClass:"lt text"},[t._v("我的直推用户")]),e("span",{staticClass:"rt text"},[t._v("共"+t._s(t.teamCount)+"人")])]),e("ul",{staticClass:"list"},t._l(t.list,(function(s,a){return e("li",{key:a,staticClass:"item"},[e("div",{class:["top","clear",t.isAllDirect?"border":""]},[e("span",{staticClass:"img-box lt"},[e("img",{attrs:{src:s.rank_logo?s.rank_logo.url:""}})]),e("span",{staticClass:"user lt"},[e("p",{staticClass:"name"},[s.id_card_real_name?e("span",[t._v(t._s(t.formatName(s.id_card_real_name)))]):t._e(),e("span",{on:{click:function(e){return t.toCall(s.user_phone_num)}}},[t._v(t._s(s.user_phone_num))]),s.id_card_real_name?e("span",{staticClass:"z_renzheng"},[t._v("已认证")]):e("span",{staticClass:"z_renzheng"},[t._v("未认证")])]),e("p",{staticClass:"type flex-row-center"},[e("span",[t._v(t._s(s.rank_name))])])]),e("span",{class:["rt","num",t.isAllDirect?"no-margin":""]},[e("p",{staticClass:"text"},[t._v("直推"+t._s(s.first_level_count)+"人 间推"+t._s(s.other_level_count)+"人")])])]),e("div",{class:["bottom","clear",t.isAllDirect?"border":""]},[e("span",{staticClass:"text lt"},[t._v("注册时间："+t._s(s.gmt_create))]),e("span",{staticClass:"text gold rt"},[t._v("\n          累计消费金额：\n          "),e("span",{staticClass:"price"},[t._v(t._s((s.trade_amount_sum/100).toFixed(2))+"元")])])])])})),0),e("van-dialog",{attrs:{"show-confirm-button":!1,"before-close":t.beforeUpgradeDialog,"close-on-click-overlay":""},model:{value:t.upgradeDialog,callback:function(s){t.upgradeDialog=s},expression:"upgradeDialog"}},[e("div",{staticClass:"upgrade flex-column-center"},[e("span",{staticClass:"title"},[t._v("确认支付升级？")]),e("div",{staticClass:"content"},[t._v("\n        支付"),e("span",{staticClass:"integral"},[t._v(t._s(t.upgradeMsg.upgrade_points)+"积分")]),t._v("为以下用户升级为"+t._s(t.upgradeMsg.next_rank_name)+"会员\n      ")]),e("span",{staticClass:"msg"},[t._v(t._s(t.upgradeMsg.user_id_card_name)+" "+t._s(t.upgradeMsg.user_phone_num))]),e("div",{staticClass:"upgradeBtn flex-row-between"},[e("div",{staticClass:"return",on:{click:t.closeUpgradeDialog}},[t._v("\n          返回\n        ")]),e("div",{staticClass:"pay",on:{click:function(s){return t.upgradeUser(t.upgradeMsg.user_id)}}},[t._v("\n          支付\n        ")])])])]),e("van-dialog",{attrs:{"show-confirm-button":!1,"before-close":t.beforeSuccessDialog,"close-on-click-overlay":""},model:{value:t.successDialog,callback:function(s){t.successDialog=s},expression:"successDialog"}},[e("div",{staticClass:"successDialog flex-column-center"},[e("i",{staticClass:"iconfont icon-gou"}),e("span",{staticClass:"title"},[t._v("支付成功")]),e("span",{staticClass:"integral"},[t._v(t._s(t.upgradeMsg.upgrade_points)+"积分")]),e("span",{staticClass:"userMsg"},[t._v(t._s(t.upgradeMsg.user_id_card_name)+" "+t._s(t.upgradeMsg.user_phone_num))]),e("span",{staticClass:"tip"},[t._v("升级为"+t._s(t.upgradeMsg.next_rank_name)+"会员")]),e("div",{staticClass:"successBtn",on:{click:t.successBtnFun}},[t._v("\n        确定\n      ")])])]),e("van-dialog",{attrs:{"show-confirm-button":!1,"before-close":t.beforeFailDialog,"close-on-click-overlay":""},model:{value:t.failDialog,callback:function(s){t.failDialog=s},expression:"failDialog"}},[e("div",{staticClass:"failDialog flex-column-center"},[e("i",{staticClass:"iconfont icon-x"}),e("span",{staticClass:"title"},[t._v("支付失败")]),e("span",{staticClass:"tip"},[t._v("积分余额不足")]),e("div",{staticClass:"failBtn",on:{click:t.failBtnFun}},[t._v("\n        确定\n      ")])])])],1)},n=[],i=e("2c92"),l={name:"DirectTeam",components:{topMsg:i["a"]},data:function(){return{teamCount:0,typeName:"钻石",list:[],isAllDirect:!1,userName:"",userRank:"",userTotal:"",upgradeDialog:!1,upgradeMsg:"",successDialog:!1,failDialog:!1}},computed:{title:function(){return this.$route.meta.title}},created:function(){this.fetchData()},beforeDestroy:function(){this.sendMsg()},methods:{formatName:function(t){var s;if(2===t.length)s=t.substr(0,1)+"*";else if(t.length>2){for(var e="",a=0,n=t.length-2;a<n;a++)e+="*";s=t.substr(0,1)+e+t.substr(-1,1)}else s=t;return s},toCall:function(t){event.preventDefault()||event.stopPropagation(),window.location.href="tel://"+t},upgradeUser:function(t){var s=this;this.$api.member.upgradeUser({target_user_id:t}).then((function(t){console.log(t),s.successDialog=!0})).catch((function(t){console.log(t),s.failDialog=!0}))},upgradeFun:function(t){this.upgradeMsg=t,this.upgradeMsg.upgrade_points=(this.upgradeMsg.upgrade_points/100).toFixed(2),this.upgradeDialog=!0},beforeUpgradeDialog:function(t,s){s()},beforeSuccessDialog:function(t,s){s()},beforeFailDialog:function(t,s){s()},closeUpgradeDialog:function(){this.upgradeDialog=!1},successBtnFun:function(){this.successDialog=!1,this.$router.push({path:"/bill",query:{current:"3"}})},failBtnFun:function(){this.failDialog=!1},sendMsg:function(){this.bus.$emit("userMsg",{userName:this.userName,userRank:this.userRank,userTotal:this.userTotal})},fetchData:function(){var t=this,s=parseInt(this.$route.query.rankOrder),e="";this.isAllDirect=!0,isNaN(s)||(e={rankOrder:s},this.isAllDirect=!1),this.$api.member.getRankListMsg().then((function(s){var a=s.data.data;console.log(a),t.$api.member.listMyDirectTeam(e).then((function(s){console.log("0000000000"),console.log(s),s.data.data.forEach((function(t){a.forEach((function(s,e,a){t.rank_order===s.rank_order&&(t.enable_points_upgrade=a[e+1].enable_points_upgrade,t.upgrade_points=a[e+1].upgrade_points,t.next_rank_name=a[e+1].rank_name)}))})),t.list=s.data.data,t.teamCount=t.list.length,t.list.length>0&&(t.typeName=t.list[0].rank_name),console.log(t.list)}))}))}}},r=l,c=(e("5b14"),e("2877")),o=Object(c["a"])(r,a,n,!1,null,"3f7b2574",null);s["default"]=o.exports}}]);